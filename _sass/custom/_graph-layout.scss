// _sass/custom/_graph-layout.scss (o come lo hai chiamato)

// Variabili (assicurati che $side-panel-width sia definita, es. in _variables.scss)
// Esempio: $side-panel-width: 280px;
// Esempio: $graph-page-bg-color: #f0f0f0; (o il tuo colore)

html.layout--graph-canvas, 
body.layout--graph-canvas {
  margin: 0; 
  padding: 0; 
  width: 100%; 
  height: 100%; 
  overflow: hidden; // Impedisce lo scroll della pagina intera
  background-color: $graph-page-bg-color; 
  font-family: $sans-serif; // Assicurati che $sans-serif sia definito
  position: relative; // Necessario per il posizionamento assoluto di #main-content-area
}

// --- Contenitore Principale dell'Area Grafo/Contenuto ---
#main-content-area-graph { // <<<<<<<<<< MODIFICATO ID QUI
  display: flex;         
  height: 70vh !important; // Manteniamo altezza di debug, aggiusteremo dopo se necessario
  background-color: rgb(8, 38, 47); // Manteniamo sfondo di debug
  position: relative; // <<<<<<<<<< CAMBIATO DA absolute A relative (per interagire meglio con il layout default)
                      // Se questo non funziona bene con il masthead, potremmo dover rivedere
  // top: 0; // Rimosso, lasceremo che il flusso normale del layout default lo posizioni
  // left: 0; // Rimosso
  width: 100%; // Prenderà la larghezza del contenitore di {{ content }} in default.html
  flex-direction: row;   
  // transition: left 0.3s ease-in-out, width 0.3s ease-in-out; // Probabilmente non più necessario senza sidepanel
}

// --- Pannello Contenuto Nodo (a SINISTRA nella vista divisa) ---
#node-content-pane {
  flex-basis: 0;          
  width: 0;                
  opacity: 0;             
  visibility: hidden;     
  overflow-x: hidden;
  overflow-y: auto;       
  background-color: #ffffff; 
  border-right: 1px solid #e0e0e0; 
  position: relative !important; // <<<<<<<<<< AGGIUNTO !important QUI
  
  padding-top: 50px;       // Spazio per il bottone "X"
  padding-left: 15px;      // Padding laterale, aggiusta se vuoi
  padding-right: 15px;     // Padding laterale, aggiusta se vuoi
  padding-bottom: 15px;    // Padding inferiore, aggiusta se vuoi
  
  box-sizing: border-box;
  box-shadow: 2px 0 8px rgba(0,0,0,0.1); 
  transition: flex-basis 0.4s ease-in-out, 
              width 0.4s ease-in-out, 
              opacity 0.3s ease-in-out 0.1s, 
              visibility 0s linear 0.4s;    
  h1, h2, h3 { 
    margin-top: 0; 
  }
}

#closeContentPaneBtn {
  position: absolute;
  top: 15px;
  right: 15px;
  background: none;
  border: none;
  font-size: 28px; // Leggermente più grande
  font-weight: 300; // Più sottile
  color: #888;
  cursor: pointer;
  padding: 5px;
  line-height: 1;
  transition: color 0.2s ease;
  z-index: 10; // Assicura che sia sopra l'eventuale iframe o altro contenuto
  
  &:hover {
    color: #333;
  }
}

#node-content-target {
  width: 100%;
  height: calc(100% - 50px); // Esempio: se hai 50px di padding-top su #node-content-pane per il bottone X
                            // Altrimenti, height: 100% se non c'è padding-top che interferisce.
  overflow: hidden; // L'iframe gestirà il suo scroll
}
#node-content-target iframe {
  width: 100%;
  height: 100%;
  border: none;
}
// --- Contenitore Grafo (a DESTRA nella vista divisa, o intero) ---
#graph-container-wrapper {
  flex-basis: 100%;         // Stato iniziale: occupa tutto lo spazio disponibile in #main-content-area
  width: 100%;              // Stato iniziale: larghezza piena
  height: 100%;
  position: relative;       // Per legenda, tooltip e #graph-container
  
  // Transizioni per quando si attiva la vista divisa
  transition: flex-basis 0.4s ease-in-out, 
              width 0.4s ease-in-out;
}

#graph-container {           // Il canvas effettivo di Vis.js
  width: 100%;
  height: 100%;
  position: relative;       // Spesso richiesto da Vis.js
}

// --- Stili per la VISTA DIVISA (quando body.view-mode--split è attiva) ---
// --- Stili per la VISTA DIVISA (quando body.view-mode--split è attiva) ---
body.view-mode--split {
  #node-content-pane {     // Pannello SINISTRO si espande
    flex-basis: 45%;        
    width: 45%;
    opacity: 1;
    visibility: visible;
    transition-delay: 0s, 0s, 0s, 0s;     
    // Assicurati che qui dentro NON ci siano più regole per #closeContentPaneBtn
    // che usano position: fixed !important;
  }

  #graph-container-wrapper { // Grafo a DESTRA si restringe
    flex-basis: 55%;        
    width: 55%;
  }
}
// Stili per Tooltip e Legenda (verifica il loro posizionamento)
// .graph-node-tooltip { ... }
// .graph-legend { ... }
